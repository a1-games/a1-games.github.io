
// This should be fetched from steam api but I get CORS blocked and haven't found a way around it
const gamedatas = {"2101690":{"success":true,"data":{"type":"game","name":"Space Voyage: The Puzzle Game","steam_appid":2101690,"required_age":0,"is_free":false,"controller_support":"full","detailed_description":"<h2 class=\"bb_tag\"><strong>Space Voyage: The Puzzle Game<\/strong><\/h2><p class=\"bb_paragraph\">Embark on a <strong>thrilling space expedition<\/strong> where strategy meets cinematic storytelling! <i>Space Voyage<\/i> is a <strong>one-of-a-kind puzzle adventure<\/strong> that plays like a dynamic board game, bringing mind-bending challenges and visually immersive gameplay.<\/p><h2 class=\"bb_tag\"><strong>Plan. Navigate. Conquer.<\/strong><\/h2><p class=\"bb_paragraph\">Your mission? <strong>Guide your spaceship to the end portal<\/strong> by strategically placing tools, teleporters, and command buttons. Every move counts ‚Äî will you craft the perfect path or drift into the abyss?<\/p><p class=\"bb_paragraph\">üõ∞Ô∏è <strong>Master the Controls<\/strong> ‚Äì Use intuitive button mechanics to turn, maneuver, or even fire rockets to clear your way.<br>üåÄ <strong>Bend Space &amp; Time<\/strong> ‚Äì Deploy teleporters to bypass obstacles and access unreachable areas.<br>üíé <strong>Collect &amp; Conquer<\/strong> ‚Äì Gather all the precious <strong>crystals<\/strong> to complete each level‚Äîwhether by flying through them or blasting them apart! <\/p><p class=\"bb_paragraph\"><\/p><p class=\"bb_paragraph\"><strong>Use buttons to navigate your spaceship<\/strong> <\/p><p class=\"bb_paragraph\"><img class=\"bb_img\" src=\"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/extras\/space_voyage_goldenbutton4.gif?t=1740941526\" \/><\/p><p class=\"bb_paragraph\">The üöÄ spaceship is controlled by buttons that determine whether your spaceship will turn right or left, or even shoot a rocket straight ahead. It's up to you to place them correctly.<\/p><p class=\"bb_paragraph\"><\/p><p class=\"bb_paragraph\"><strong>Use teleporters to avoid obstacles<\/strong><\/p><p class=\"bb_paragraph\"><img class=\"bb_img\" src=\"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/extras\/space_voyage_portal_in.gif?t=1740941526\" \/> <\/p><p class=\"bb_paragraph\"><img class=\"bb_img\" src=\"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/extras\/space_voyage_portal_out.gif?t=1740941526\" \/><\/p><p class=\"bb_paragraph\">Teleporters enable you to reach places beyond the initial level borders and you can use them to change the direction of your spaceship in otherwise impossible ways.<\/p><p class=\"bb_paragraph\"><\/p><p class=\"bb_paragraph\"><strong>Collect all the crystals<\/strong><\/p><p class=\"bb_paragraph\"><img class=\"bb_img\" src=\"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/extras\/space_voyage_crystals_repeating2.gif?t=1740941526\" \/><\/p><p class=\"bb_paragraph\">To complete a level it is required to collect all crystals. You can pick these up either by flying into them or shooting them.<\/p><p class=\"bb_paragraph\"><\/p><p class=\"bb_paragraph\"><strong>Additional Information<\/strong><\/p><p class=\"bb_paragraph\">The game has extra tools in the settings to account for difficulty with associating the colors of some items to their respective actions.<\/p>","about_the_game":"<h2 class=\"bb_tag\"><strong>Space Voyage: The Puzzle Game<\/strong><\/h2><p class=\"bb_paragraph\">Embark on a <strong>thrilling space expedition<\/strong> where strategy meets cinematic storytelling! <i>Space Voyage<\/i> is a <strong>one-of-a-kind puzzle adventure<\/strong> that plays like a dynamic board game, bringing mind-bending challenges and visually immersive gameplay.<\/p><h2 class=\"bb_tag\"><strong>Plan. Navigate. Conquer.<\/strong><\/h2><p class=\"bb_paragraph\">Your mission? <strong>Guide your spaceship to the end portal<\/strong> by strategically placing tools, teleporters, and command buttons. Every move counts ‚Äî will you craft the perfect path or drift into the abyss?<\/p><p class=\"bb_paragraph\">üõ∞Ô∏è <strong>Master the Controls<\/strong> ‚Äì Use intuitive button mechanics to turn, maneuver, or even fire rockets to clear your way.<br>üåÄ <strong>Bend Space &amp; Time<\/strong> ‚Äì Deploy teleporters to bypass obstacles and access unreachable areas.<br>üíé <strong>Collect &amp; Conquer<\/strong> ‚Äì Gather all the precious <strong>crystals<\/strong> to complete each level‚Äîwhether by flying through them or blasting them apart! <\/p><p class=\"bb_paragraph\"><\/p><p class=\"bb_paragraph\"><strong>Use buttons to navigate your spaceship<\/strong> <\/p><p class=\"bb_paragraph\"><img class=\"bb_img\" src=\"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/extras\/space_voyage_goldenbutton4.gif?t=1740941526\" \/><\/p><p class=\"bb_paragraph\">The üöÄ spaceship is controlled by buttons that determine whether your spaceship will turn right or left, or even shoot a rocket straight ahead. It's up to you to place them correctly.<\/p><p class=\"bb_paragraph\"><\/p><p class=\"bb_paragraph\"><strong>Use teleporters to avoid obstacles<\/strong><\/p><p class=\"bb_paragraph\"><img class=\"bb_img\" src=\"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/extras\/space_voyage_portal_in.gif?t=1740941526\" \/> <\/p><p class=\"bb_paragraph\"><img class=\"bb_img\" src=\"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/extras\/space_voyage_portal_out.gif?t=1740941526\" \/><\/p><p class=\"bb_paragraph\">Teleporters enable you to reach places beyond the initial level borders and you can use them to change the direction of your spaceship in otherwise impossible ways.<\/p><p class=\"bb_paragraph\"><\/p><p class=\"bb_paragraph\"><strong>Collect all the crystals<\/strong><\/p><p class=\"bb_paragraph\"><img class=\"bb_img\" src=\"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/extras\/space_voyage_crystals_repeating2.gif?t=1740941526\" \/><\/p><p class=\"bb_paragraph\">To complete a level it is required to collect all crystals. You can pick these up either by flying into them or shooting them.<\/p><p class=\"bb_paragraph\"><\/p><p class=\"bb_paragraph\"><strong>Additional Information<\/strong><\/p><p class=\"bb_paragraph\">The game has extra tools in the settings to account for difficulty with associating the colors of some items to their respective actions.<\/p>","short_description":"Space Voyage is a one-of-a-kind puzzle adventure that plays like a dynamic board game, bringing mind-bending challenges and visually immersive gameplay. üõ∞Ô∏èMaster the Controls, üåÄBend Space &amp; Time, üíéCollect &amp; Conquer.","supported_languages":"English","header_image":"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/header.jpg?t=1740941526","capsule_image":"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/capsule_231x87.jpg?t=1740941526","capsule_imagev5":"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/capsule_184x69.jpg?t=1740941526","website":null,"pc_requirements":{"minimum":"<strong>Minimum:<\/strong><br><ul class=\"bb_ul\"><li><strong>OS:<\/strong> Windows 10<br><\/li><li><strong>Processor:<\/strong> Intel Core i3 | AMD A8<br><\/li><li><strong>Memory:<\/strong> 8 MB RAM<br><\/li><li><strong>Graphics:<\/strong> NVIDIA GeForce GTX 650 Ti, 2 GB | AMD Radeon R7 360, 2 GB<br><\/li><li><strong>Storage:<\/strong> 3 GB available space<\/li><\/ul>"},"mac_requirements":[],"linux_requirements":[],"developers":["a1creator"],"publishers":["a1creator"],"demos":[{"appid":2136000,"description":""}],"price_overview":{"currency":"EUR","initial":499,"final":499,"discount_percent":0,"initial_formatted":"","final_formatted":"4,99‚Ç¨"},"packages":[751139],"package_groups":[{"name":"default","title":"Buy Space Voyage: The Puzzle Game","description":"","selection_text":"Select a purchase option","save_text":"","display_type":0,"is_recurring_subscription":"false","subs":[{"packageid":751139,"percent_savings_text":" ","percent_savings":0,"option_text":"Space Voyage: The Puzzle Game - 4,99‚Ç¨","option_description":"","can_get_free_license":"0","is_free_license":false,"price_in_cents_with_discount":499}]}],"platforms":{"windows":true,"mac":false,"linux":false},"categories":[{"id":2,"description":"Single-player"},{"id":22,"description":"Steam Achievements"},{"id":28,"description":"Full controller support"},{"id":23,"description":"Steam Cloud"},{"id":62,"description":"Family Sharing"}],"genres":[{"id":"4","description":"Casual"},{"id":"23","description":"Indie"},{"id":"2","description":"Strategy"}],"screenshots":[{"id":0,"path_thumbnail":"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/ss_60664371a59d28e4eaee07d2a8baee64ec6b05ee.600x338.jpg?t=1740941526","path_full":"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/ss_60664371a59d28e4eaee07d2a8baee64ec6b05ee.1920x1080.jpg?t=1740941526"},{"id":1,"path_thumbnail":"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/ss_9a11d63397ddb62bf5bcd4d942d6ab2a9e3482b9.600x338.jpg?t=1740941526","path_full":"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/ss_9a11d63397ddb62bf5bcd4d942d6ab2a9e3482b9.1920x1080.jpg?t=1740941526"},{"id":2,"path_thumbnail":"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/ss_dd5cf51584210cba979bab757b008e6ad5a28043.600x338.jpg?t=1740941526","path_full":"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/ss_dd5cf51584210cba979bab757b008e6ad5a28043.1920x1080.jpg?t=1740941526"},{"id":3,"path_thumbnail":"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/ss_3cc01987f5197755c61c333cfcd6230bdcbd9899.600x338.jpg?t=1740941526","path_full":"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/ss_3cc01987f5197755c61c333cfcd6230bdcbd9899.1920x1080.jpg?t=1740941526"},{"id":4,"path_thumbnail":"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/ss_e7e35f421149e320b9a3444b21be7bc7e97dc221.600x338.jpg?t=1740941526","path_full":"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/ss_e7e35f421149e320b9a3444b21be7bc7e97dc221.1920x1080.jpg?t=1740941526"},{"id":5,"path_thumbnail":"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/ss_7befcc5113e98afcd7e5315ce65e811d661fe848.600x338.jpg?t=1740941526","path_full":"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/ss_7befcc5113e98afcd7e5315ce65e811d661fe848.1920x1080.jpg?t=1740941526"},{"id":6,"path_thumbnail":"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/ss_bee74aadf65690eed6ac95282f4f8d38c09be29d.600x338.jpg?t=1740941526","path_full":"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/ss_bee74aadf65690eed6ac95282f4f8d38c09be29d.1920x1080.jpg?t=1740941526"},{"id":7,"path_thumbnail":"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/ss_21f0424c501aad6df7c880e4f70b2933fdfdc630.600x338.jpg?t=1740941526","path_full":"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/ss_21f0424c501aad6df7c880e4f70b2933fdfdc630.1920x1080.jpg?t=1740941526"},{"id":8,"path_thumbnail":"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/ss_b21bc4059dd79a230cd6f27594815807e13a7aa1.600x338.jpg?t=1740941526","path_full":"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/ss_b21bc4059dd79a230cd6f27594815807e13a7aa1.1920x1080.jpg?t=1740941526"},{"id":9,"path_thumbnail":"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/ss_11544027dabb513247932618e14958acf597b945.600x338.jpg?t=1740941526","path_full":"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/ss_11544027dabb513247932618e14958acf597b945.1920x1080.jpg?t=1740941526"},{"id":10,"path_thumbnail":"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/ss_6eb68da582281ad50a54a2de2abea2aadcb8518a.600x338.jpg?t=1740941526","path_full":"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/ss_6eb68da582281ad50a54a2de2abea2aadcb8518a.1920x1080.jpg?t=1740941526"},{"id":11,"path_thumbnail":"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/ss_412ffe434e80656dcc83919b13e6c7c6c88ad36b.600x338.jpg?t=1740941526","path_full":"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/ss_412ffe434e80656dcc83919b13e6c7c6c88ad36b.1920x1080.jpg?t=1740941526"},{"id":12,"path_thumbnail":"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/ss_eb45687aebab7b3eacb17468bed95675a51be431.600x338.jpg?t=1740941526","path_full":"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/ss_eb45687aebab7b3eacb17468bed95675a51be431.1920x1080.jpg?t=1740941526"},{"id":13,"path_thumbnail":"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/ss_bf4dfe452d5540e0d3f74cf37c2e3797b01d5664.600x338.jpg?t=1740941526","path_full":"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/ss_bf4dfe452d5540e0d3f74cf37c2e3797b01d5664.1920x1080.jpg?t=1740941526"}],"movies":[{"id":256921595,"name":"Official Trailer","thumbnail":"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/256921595\/movie.293x165.jpg?t=1671194967","webm":{"480":"http:\/\/video.akamai.steamstatic.com\/store_trailers\/256921595\/movie480_vp9.webm?t=1671194967","max":"http:\/\/video.akamai.steamstatic.com\/store_trailers\/256921595\/movie_max_vp9.webm?t=1671194967"},"mp4":{"480":"http:\/\/video.akamai.steamstatic.com\/store_trailers\/256921595\/movie480.mp4?t=1671194967","max":"http:\/\/video.akamai.steamstatic.com\/store_trailers\/256921595\/movie_max.mp4?t=1671194967"},"highlight":true}],"achievements":{"total":9,"highlighted":[{"name":"Allstar","path":"https:\/\/cdn.akamai.steamstatic.com\/steamcommunity\/public\/images\/apps\/2101690\/e2cb79a36fc0445fb19b7038a32e6aceefe451e1.jpg"},{"name":"Getting Started","path":"https:\/\/cdn.akamai.steamstatic.com\/steamcommunity\/public\/images\/apps\/2101690\/85821a3eaf0899162850bffe154a257f806863ff.jpg"},{"name":"Marksman","path":"https:\/\/cdn.akamai.steamstatic.com\/steamcommunity\/public\/images\/apps\/2101690\/1448f3529b9df244788bc0ba02ab86f24df138d5.jpg"},{"name":"I know what I'm doing!","path":"https:\/\/cdn.akamai.steamstatic.com\/steamcommunity\/public\/images\/apps\/2101690\/b32322c6db9bd88680b0e7b6d3bb4b535440a380.jpg"},{"name":"No Refunds","path":"https:\/\/cdn.akamai.steamstatic.com\/steamcommunity\/public\/images\/apps\/2101690\/04ea7cd4057d94e2ba9461ad661729517aa40901.jpg"},{"name":"Super Supporter","path":"https:\/\/cdn.akamai.steamstatic.com\/steamcommunity\/public\/images\/apps\/2101690\/a98557e851cff1a43908ea6c54c9271b178a6131.jpg"},{"name":"Hackerman","path":"https:\/\/cdn.akamai.steamstatic.com\/steamcommunity\/public\/images\/apps\/2101690\/140c75d4d36aeb2ddbbb81d811edb1c9c303d657.jpg"},{"name":"Bootcamp Survivor","path":"https:\/\/cdn.akamai.steamstatic.com\/steamcommunity\/public\/images\/apps\/2101690\/fe4f7d3ef17d9b1583901ed1581cfb265119c0f9.jpg"},{"name":"Barrel Commander","path":"https:\/\/cdn.akamai.steamstatic.com\/steamcommunity\/public\/images\/apps\/2101690\/5cc99fc3c98acd0a64b5fadea4fc99866889e79b.jpg"}]},"release_date":{"coming_soon":false,"date":"20 Dec, 2022"},"support_info":{"url":"","email":"customerhelp.a1a3@gmail.com"},"background":"https:\/\/store.akamai.steamstatic.com\/images\/storepagebackground\/app\/2101690?t=1740941526","background_raw":"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/2101690\/page_bg_raw.jpg?t=1740941526","content_descriptors":{"ids":[],"notes":null},"ratings":{"dejus":{"rating":"10","descriptors":"Viol√™ncia","use_age_gate":"true","required_age":"10"},"steam_germany":{"rating_generated":"1","rating":"12","required_age":"12","banned":"0","use_age_gate":"0","descriptors":"Gewalt"}}}}}


function _setLinkRef(a_elem, appid)
{
    a_elem.href = `https://store.steampowered.com/app/${appid}`;
    a_elem.target = "_blank";
    return a_elem;
}

function SpawnSteamWidget(parent, appid)
{
    // BODY
    let body = SpawnDivWithID(parent, `widget_body_${appid}`, "widget-body");
    let container = SpawnDivWithID(body, `widget_container_${appid}`, "widget-container");
    
    // HEADER
    let header = SpawnDivWithID(container, `widget_header_${appid}`, "widget-header");
    
    // Game Title
    let titleClick = SpawnElement(header, "h1", "widget-title");
    titleClick.id = `widget_title_${appid}`;
    let title_a = SpawnElement(titleClick, "a", "widget-a");
    title_a.id = `widget_a_${appid}`;

    // on Steam
    let tailClick = SpawnElement(header, "h1", "widget-tail");
    tailClick.id = `widget_tail_${appid}`;
    tailClick.innerHTML = "&nbsp;";

    let tail_a = SpawnElement(tailClick, "a", "widget-tail-a");
    tail_a.id = `widget_tail_a_${appid}`;
    _setLinkRef(tail_a, appid);

    let onSteam = SpawnElement(tail_a, "em");
    onSteam.innerText = "on Steam";

    // DESCRIPTION
    let desc = SpawnDivWithID(container, `widget_desc_${appid}`, "widget-desc");

    let desc_a = SpawnElement(desc, "a", "widget-desc-a");
    desc_a.id = `widget_desc_a_${appid}`;
    _setLinkRef(desc_a, appid);

    let desc_img = SpawnElement(desc_a, "img", "widget-capsule")
    desc_img.id = `widget_capsule_${appid}`;


    // ICONS
    SpawnDivWithID(container, `widget_platforms_${appid}`, "widget-platforms");

    
    // PURCHASE BUTTONS
    let purchaseContainer = SpawnDivWithID(container, `widget_purchase_container_${appid}`, "widget-purchase-container");
    let purchaseBackground = SpawnDivWithID(purchaseContainer, `widget_purchase_bckg_${appid}`, "widget-purchase-bckg");
    
    let priceBox = SpawnDivWithID(purchaseBackground, `widget_price_${appid}`, "widget-price");

    let buyButton = SpawnDivWithID(purchaseBackground, `widget_buy_${appid}`, "widget-buy");
    let buyClick = SpawnElement(buyButton, "a", "widget-buy-a");
    buyClick.innerHTML = "Buy on Steam";
    _setLinkRef(buyClick, appid);
    
    
    RenderSteamWidget(appid);
}

function RenderSteamWidget(appid)
{
    // should check if each thing exists before doing it. that way this function can be reused for all widget shapes and sizes.
    if (gamedatas[appid].success != undefined)
        {
            // Title
            let gameTitle = document.getElementById(`widget_a_${appid}`);
            gameTitle.innerText = `${gamedatas[appid].data["name"]}`;
            gameTitle.href = `https://store.steampowered.com/app/${appid}`;
            gameTitle.target = "_blank";
            
            // Capsule
            let gameCapsule = document.getElementById(`widget_capsule_${appid}`);
            gameCapsule.src = `https://shared.fastly.steamstatic.com/store_item_assets/steam/apps/${appid}/capsule_184x69.jpg`;
            
            // Short Description
            let desc = document.getElementById(`widget_desc_${appid}`);
            desc.innerHTML += gamedatas[appid].data["short_description"];
            
            // Supported Platform Icons
            let platformsHolder = document.getElementById(`widget_platforms_${appid}`);
            platformsHolder.innerHTML = ""; // Deletes previous children
            let platforms = gamedatas[appid].data["platforms"];

            for (let platform in platforms) {
                if (platforms[platform]) // If platform is true
                    SpawnElement(platformsHolder, "span", `platform_img ${platform}`);
            };

            // Price
            let priceTag = document.getElementById(`widget_price_${appid}`);
            priceTag.innerText = `${gamedatas[appid].data["price_overview"]["final_formatted"]}`;
            
    }
    else
    {
        document.getElementById('steam-widget').innerHTML = 'Sorry, we could not fetch the game details.';
    }
}













